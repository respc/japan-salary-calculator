<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å€‹äººäº‹æ¥­ä¸»ãƒ»ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã®ãŸã‚ã®ç¢ºå®šç”³å‘Šãƒ»ç¨é‡‘ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€‚é‡è¦ãªç· ã‚åˆ‡ã‚Šã‚’ä¸€ç›®ã§ç¢ºèªã€‚">
    <title>ç¨é‡‘ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | ç¢ºå®šç”³å‘Šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .calendar-container { max-width: 1000px; margin: 0 auto; }

        .year-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .year-nav button {
            padding: 10px 20px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: white;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .year-nav button.active, .year-nav button:hover {
            background: #667eea;
            color: white;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin: 24px 0;
        }

        .month-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            min-height: 200px;
        }

        .month-card h3 {
            text-align: center;
            padding: 10px;
            margin: -16px -16px 16px -16px;
            border-radius: 12px 12px 0 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 1.1rem;
        }

        .month-card.current-month h3 {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .event {
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            font-size: 0.85rem;
            position: relative;
            padding-left: 16px;
        }

        .event:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            border-radius: 4px 0 0 4px;
        }

        .event.deadline {
            background: #ffebee;
        }
        .event.deadline:before { background: #e74c3c; }

        .event.payment {
            background: #fff3e0;
        }
        .event.payment:before { background: #ff9800; }

        .event.preparation {
            background: #e3f2fd;
        }
        .event.preparation:before { background: #2196F3; }

        .event.bonus {
            background: #e8f5e9;
        }
        .event.bonus:before { background: #4CAF50; }

        .event-date {
            font-weight: 700;
            color: #333;
        }

        .event-title {
            font-weight: 600;
            margin: 4px 0;
        }

        .event-desc {
            color: #666;
            font-size: 0.8rem;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        .upcoming-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .upcoming-event {
            display: flex;
            align-items: center;
            padding: 16px;
            margin: 12px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .upcoming-event.urgent {
            border-left-color: #e74c3c;
            background: #ffebee;
        }

        .upcoming-date {
            min-width: 80px;
            text-align: center;
            margin-right: 20px;
        }

        .upcoming-date .day {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            line-height: 1;
        }

        .upcoming-event.urgent .upcoming-date .day {
            color: #e74c3c;
        }

        .upcoming-date .month {
            font-size: 0.85rem;
            color: #666;
        }

        .upcoming-content {
            flex: 1;
        }

        .upcoming-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 4px;
        }

        .upcoming-desc {
            color: #666;
            font-size: 0.9rem;
        }

        .countdown {
            text-align: center;
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            font-weight: 600;
        }

        .tips-section {
            background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%);
            border-radius: 12px;
            padding: 20px;
            margin: 24px 0;
        }

        .tips-section h4 {
            margin-bottom: 15px;
        }

        .tips-section ul {
            margin-left: 20px;
        }

        .tips-section li {
            margin: 8px 0;
        }

        @media (max-width: 900px) {
            .calendar-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .calendar-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container calendar-container">
        <header>
            <h1>ğŸ“… ç¨é‡‘ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h1>
            <p>å€‹äººäº‹æ¥­ä¸»ãƒ»ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã®ãŸã‚ã®ç¢ºå®šç”³å‘Šãƒ»ç´ç¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</p>
            <a href="jigyounushi.html" style="display: inline-block; margin-top: 10px; padding: 8px 20px; background: rgba(255,255,255,0.2); color: white; text-decoration: none; border-radius: 20px; font-size: 0.9rem;">â† è¨ˆç®—ãƒ„ãƒ¼ãƒ«ã«æˆ»ã‚‹</a>
        </header>

        <!-- Upcoming Events -->
        <div class="upcoming-section">
            <h3>ğŸ”” ç›´è¿‘ã®é‡è¦ãªç· ã‚åˆ‡ã‚Š</h3>
            <div id="upcomingEvents">
                <!-- Dynamic content -->
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #e74c3c;"></div>
                <span>ç”³å‘Šãƒ»å±Šå‡ºæœŸé™</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff9800;"></div>
                <span>ç´ç¨æœŸé™</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #2196F3;"></div>
                <span>æº–å‚™ãƒ»ç¢ºèª</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4CAF50;"></div>
                <span>ãŠå¾—æƒ…å ±</span>
            </div>
        </div>

        <!-- Calendar Grid -->
        <div class="calendar-grid" id="calendarGrid">
            <!-- Dynamic content -->
        </div>

        <!-- Tips -->
        <div class="tips-section">
            <h4>ğŸ’¡ ç¢ºå®šç”³å‘Šã®ãƒã‚¤ãƒ³ãƒˆ</h4>
            <ul>
                <li><strong>e-TaxãŒãŠã™ã™ã‚:</strong> é’è‰²ç”³å‘Š65ä¸‡å††æ§é™¤ã®è¦ä»¶ã€‚è‡ªå®…ã‹ã‚‰24æ™‚é–“ç”³å‘Šå¯èƒ½</li>
                <li><strong>é ˜åæ›¸ã®æ•´ç†:</strong> æœˆã”ã¨ã«ã¾ã¨ã‚ã¦ãŠãã¨ç¢ºå®šç”³å‘Šæ™‚ã«æ¥½</li>
                <li><strong>å¸³ç°¿ã¯æ¯æœˆ:</strong> å¹´æœ«ã«ã¾ã¨ã‚ã¦ã‚„ã‚‹ã¨å¤§å¤‰ã€‚æ¯æœˆå°‘ã—ãšã¤è¨˜å¸³ã‚’</li>
                <li><strong>ãµã‚‹ã•ã¨ç´ç¨:</strong> 12æœˆã¯äººæ°—è¿”ç¤¼å“ãŒå£²ã‚Šåˆ‡ã‚Œã‚‹ã®ã§æ—©ã‚ã«</li>
                <li><strong>çµŒè²»ã®è¦‹ç›´ã—:</strong> å¹´æœ«ã¾ã§ã«å¿…è¦ãªçµŒè²»ã‚’ä½¿ã„åˆ‡ã‚‹ï¼ˆç„¡é§„é£ã„ã¯NGï¼‰</li>
            </ul>
        </div>

        <div class="info-section">
            <h3>âš ï¸ æ³¨æ„äº‹é …</h3>
            <ul>
                <li>æœŸé™ãŒåœŸæ—¥ç¥æ—¥ã®å ´åˆã¯ç¿Œå–¶æ¥­æ—¥ãŒæœŸé™ã¨ãªã‚Šã¾ã™</li>
                <li>æ¶ˆè²»ç¨ã®ç”³å‘Šç¾©å‹™ã¯å‰ã€…å¹´ã®èª²ç¨å£²ä¸Šé«˜ã«ã‚ˆã‚Šåˆ¤å®šã•ã‚Œã¾ã™</li>
                <li>äºˆå®šç´ç¨ã¯å‰å¹´ã®æ‰€å¾—ç¨ãŒ15ä¸‡å††ä»¥ä¸Šã®å ´åˆã«å¿…è¦ã§ã™</li>
            </ul>
        </div>
    </div>

    <script>
        const taxEvents = [
            // 1æœˆ
            { month: 1, day: 4, title: 'ç¨å‹™ç½²ã®æ¥­å‹™é–‹å§‹', type: 'preparation', desc: 'å¹´å§‹ã‹ã‚‰ç¢ºå®šç”³å‘Šã®æº–å‚™ã‚’' },
            { month: 1, day: 10, title: 'æºæ³‰æ‰€å¾—ç¨ã®ç´ä»˜æœŸé™', type: 'payment', desc: 'ç‰¹ä¾‹é©ç”¨è€…ï¼ˆ7ã€œ12æœˆåˆ†ï¼‰' },
            { month: 1, day: 31, title: 'å„Ÿå´è³‡ç”£ç”³å‘Š', type: 'deadline', desc: 'äº‹æ¥­ç”¨è³‡ç”£ãŒã‚ã‚‹å ´åˆ' },
            { month: 1, day: 31, title: 'æ³•å®šèª¿æ›¸ã®æå‡ºæœŸé™', type: 'deadline', desc: 'æ”¯æ‰•èª¿æ›¸ãƒ»æºæ³‰å¾´åç¥¨' },

            // 2æœˆ
            { month: 2, day: 16, title: 'ç¢ºå®šç”³å‘Šå—ä»˜é–‹å§‹', type: 'preparation', desc: 'æ‰€å¾—ç¨ãƒ»è´ˆä¸ç¨' },

            // 3æœˆ
            { month: 3, day: 15, title: 'æ‰€å¾—ç¨ç¢ºå®šç”³å‘ŠæœŸé™', type: 'deadline', desc: 'âš ï¸ æœ€é‡è¦ï¼é’è‰²ç”³å‘Šã®æå‡ºã‚‚' },
            { month: 3, day: 15, title: 'é’è‰²ç”³å‘Šæ‰¿èªç”³è«‹æœŸé™', type: 'deadline', desc: 'ç¿Œå¹´ã‹ã‚‰é’è‰²ç”³å‘Šã—ãŸã„å ´åˆ' },
            { month: 3, day: 15, title: 'è´ˆä¸ç¨ç”³å‘ŠæœŸé™', type: 'deadline', desc: 'å‰å¹´ã®è´ˆä¸ã«ã¤ã„ã¦' },
            { month: 3, day: 31, title: 'æ¶ˆè²»ç¨ç”³å‘ŠæœŸé™', type: 'deadline', desc: 'èª²ç¨äº‹æ¥­è€…ã®å ´åˆ' },

            // 4æœˆ
            { month: 4, day: 1, title: 'æ–°å¹´åº¦ã‚¹ã‚¿ãƒ¼ãƒˆ', type: 'preparation', desc: 'æ–°ã—ã„å¸³ç°¿ã‚’ç”¨æ„' },
            { month: 4, day: 30, title: 'è»½è‡ªå‹•è»Šç¨ç´ä»˜', type: 'payment', desc: 'äº‹æ¥­ç”¨è»Šä¸¡ãŒã‚ã‚‹å ´åˆ' },

            // 5æœˆ
            { month: 5, day: 31, title: 'è‡ªå‹•è»Šç¨ç´ä»˜æœŸé™', type: 'payment', desc: 'æ™®é€šè»Šãƒ»äº‹æ¥­ç”¨è»Šä¸¡' },

            // 6æœˆ
            { month: 6, day: 30, title: 'ä½æ°‘ç¨ï¼ˆ1æœŸï¼‰ç´ä»˜', type: 'payment', desc: 'æ™®é€šå¾´åã®å ´åˆ' },

            // 7æœˆ
            { month: 7, day: 10, title: 'æºæ³‰æ‰€å¾—ç¨ã®ç´ä»˜', type: 'payment', desc: 'ç‰¹ä¾‹é©ç”¨è€…ï¼ˆ1ã€œ6æœˆåˆ†ï¼‰' },
            { month: 7, day: 31, title: 'æ‰€å¾—ç¨äºˆå®šç´ç¨ï¼ˆ1æœŸï¼‰', type: 'payment', desc: 'å‰å¹´ã®ç¨é¡ãŒ15ä¸‡å††ä»¥ä¸Šã®å ´åˆ' },

            // 8æœˆ
            { month: 8, day: 31, title: 'ä½æ°‘ç¨ï¼ˆ2æœŸï¼‰ç´ä»˜', type: 'payment', desc: 'æ™®é€šå¾´åã®å ´åˆ' },
            { month: 8, day: 31, title: 'å€‹äººäº‹æ¥­ç¨ï¼ˆ1æœŸï¼‰', type: 'payment', desc: 'äº‹æ¥­æ‰€å¾—290ä¸‡å††è¶…ã®å ´åˆ' },

            // 9æœˆ
            { month: 9, day: 1, title: 'ä¸ŠåŠæœŸã®å¸³ç°¿ç¢ºèª', type: 'preparation', desc: 'çµŒè²»ãƒ»å£²ä¸Šã®ç¢ºèªã‚’' },

            // 10æœˆ
            { month: 10, day: 31, title: 'ä½æ°‘ç¨ï¼ˆ3æœŸï¼‰ç´ä»˜', type: 'payment', desc: 'æ™®é€šå¾´åã®å ´åˆ' },

            // 11æœˆ
            { month: 11, day: 30, title: 'æ‰€å¾—ç¨äºˆå®šç´ç¨ï¼ˆ2æœŸï¼‰', type: 'payment', desc: 'å‰å¹´ã®ç¨é¡ãŒ15ä¸‡å††ä»¥ä¸Šã®å ´åˆ' },
            { month: 11, day: 30, title: 'å€‹äººäº‹æ¥­ç¨ï¼ˆ2æœŸï¼‰', type: 'payment', desc: 'äº‹æ¥­æ‰€å¾—290ä¸‡å††è¶…ã®å ´åˆ' },

            // 12æœˆ
            { month: 12, day: 1, title: 'ãµã‚‹ã•ã¨ç´ç¨ãƒ©ã‚¹ãƒˆã‚¹ãƒ‘ãƒ¼ãƒˆ', type: 'bonus', desc: 'å¹´å†…ã®å¯„ä»˜ã§ä»Šå¹´ã®æ§é™¤ã«' },
            { month: 12, day: 15, title: 'ç¢ºå®šç”³å‘Šã®æº–å‚™é–‹å§‹', type: 'preparation', desc: 'å¹´é–“ã®å¸³ç°¿ç· ã‚ä½œæ¥­' },
            { month: 12, day: 25, title: 'çµŒè²»ã®æœ€çµ‚ç¢ºèª', type: 'preparation', desc: 'å¿…è¦ãªçµŒè²»ã‚’å¹´å†…ã«' },
            { month: 12, day: 31, title: 'ãµã‚‹ã•ã¨ç´ç¨æœŸé™', type: 'bonus', desc: 'âš ï¸ 23:59ã¾ã§ï¼' },

            // 1æœˆï¼ˆç¿Œå¹´è¡¨ç¤ºç”¨ï¼‰
            { month: 1, day: 31, title: 'ä½æ°‘ç¨ï¼ˆ4æœŸï¼‰ç´ä»˜', type: 'payment', desc: 'æ™®é€šå¾´åã®å ´åˆ' },
        ];

        const monthNames = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];

        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const currentMonth = new Date().getMonth() + 1;

            grid.innerHTML = '';

            for (let month = 1; month <= 12; month++) {
                const monthEvents = taxEvents.filter(e => e.month === month);
                const isCurrentMonth = month === currentMonth;

                const card = document.createElement('div');
                card.className = 'month-card' + (isCurrentMonth ? ' current-month' : '');

                let eventsHtml = '';
                monthEvents.forEach(event => {
                    eventsHtml += `
                        <div class="event ${event.type}">
                            <div class="event-date">${event.day}æ—¥</div>
                            <div class="event-title">${event.title}</div>
                            <div class="event-desc">${event.desc}</div>
                        </div>
                    `;
                });

                if (monthEvents.length === 0) {
                    eventsHtml = '<p style="color: #999; text-align: center; padding: 20px;">ç‰¹ã«ãªã—</p>';
                }

                card.innerHTML = `
                    <h3>${monthNames[month - 1]}</h3>
                    ${eventsHtml}
                `;

                grid.appendChild(card);
            }
        }

        function renderUpcoming() {
            const container = document.getElementById('upcomingEvents');
            const today = new Date();
            const currentMonth = today.getMonth() + 1;
            const currentDay = today.getDate();

            // Get upcoming events (next 90 days)
            const upcoming = [];
            for (let i = 0; i < 4; i++) {
                const checkMonth = ((currentMonth - 1 + i) % 12) + 1;
                taxEvents.filter(e => e.month === checkMonth).forEach(event => {
                    let eventDate;
                    if (i === 0 && event.day < currentDay) {
                        // Past event this month, skip or show next year
                        return;
                    }
                    eventDate = new Date(today.getFullYear() + (checkMonth < currentMonth ? 1 : 0), checkMonth - 1, event.day);
                    const daysUntil = Math.ceil((eventDate - today) / (1000 * 60 * 60 * 24));
                    if (daysUntil >= 0 && daysUntil <= 90) {
                        upcoming.push({ ...event, daysUntil, eventDate });
                    }
                });
            }

            // Sort by date
            upcoming.sort((a, b) => a.daysUntil - b.daysUntil);

            // Take top 5
            const topEvents = upcoming.slice(0, 5);

            container.innerHTML = topEvents.map(event => {
                const isUrgent = event.daysUntil <= 14;
                let countdown = '';
                if (event.daysUntil === 0) {
                    countdown = 'ä»Šæ—¥ï¼';
                } else if (event.daysUntil === 1) {
                    countdown = 'æ˜æ—¥';
                } else {
                    countdown = `ã‚ã¨${event.daysUntil}æ—¥`;
                }

                return `
                    <div class="upcoming-event ${isUrgent ? 'urgent' : ''}">
                        <div class="upcoming-date">
                            <div class="day">${event.day}</div>
                            <div class="month">${monthNames[event.month - 1]}</div>
                        </div>
                        <div class="upcoming-content">
                            <div class="upcoming-title">${event.title}</div>
                            <div class="upcoming-desc">${event.desc}</div>
                        </div>
                        <div class="countdown">${countdown}</div>
                    </div>
                `;
            }).join('');

            if (topEvents.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">ç›´è¿‘ã®ç· ã‚åˆ‡ã‚Šã¯ã‚ã‚Šã¾ã›ã‚“</p>';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderCalendar();
            renderUpcoming();
        });
    </script>
</body>
</html>
